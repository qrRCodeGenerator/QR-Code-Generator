<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Master Enterprise - Arka Mishra</title>
    
    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            /* Light Theme */
            --primary: #2563eb; /* Professional Blue */
            --accent: #00bfa5;  /* Green Accent */
            --bg-body: #f3f4f6;
            --bg-card: #ffffff;
            --text-main: #111827;
            --text-sub: #6b7280;
            --border: #e5e7eb;
            --sidebar-w: 260px;
        }

        body.dark-mode {
            /* Dark Theme */
            --primary: #3b82f6;
            --bg-body: #0f172a;
            --bg-card: #1e293b;
            --text-main: #f9fafb;
            --text-sub: #9ca3af;
            --border: #334155;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0;
            height: 100vh;
            display: flex;
            overflow: hidden; /* No scroll on body, scroll inside panels */
            transition: background 0.3s ease;
        }

        /* --- 1. SIDEBAR (Left) --- */
        .sidebar {
            width: var(--sidebar-w);
            background: var(--bg-card);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            padding: 24px;
            z-index: 20;
            transition: 0.3s ease;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 20px;
            font-weight: 700;
            color: var(--text-main);
            margin-bottom: 40px;
            letter-spacing: -0.5px;
        }
        .logo i { color: var(--primary); font-size: 24px; }

        .nav-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-sub);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            margin-bottom: 5px;
            color: var(--text-sub);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s ease;
        }
        .menu-item:hover { background: var(--bg-body); color: var(--text-main); }
        .menu-item.active { background: rgba(37, 99, 235, 0.1); color: var(--primary); font-weight: 600; }

        /* Bottom Actions */
        .sidebar-footer { margin-top: auto; display: flex; flex-direction: column; gap: 10px; }

        .btn-theme, .btn-support {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
            text-decoration: none;
        }
        
        .btn-theme { background: var(--bg-body); color: var(--text-main); border: 1px solid var(--border); }
        .btn-theme:hover { border-color: var(--text-sub); }

        .btn-support { background: #25D366; color: white; border: none; }
        .btn-support:hover { background: #1ebc59; }

        /* --- 2. MAIN LAYOUT (Right) --- */
        .main-wrapper {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 380px; /* Split: Input Area | Preview Area */
            height: 100vh;
        }

        /* --- CENTER: INPUT AREA --- */
        .input-panel {
            padding: 40px;
            overflow-y: auto;
        }

        .header-title { font-size: 24px; font-weight: 700; margin-bottom: 5px; }
        .header-sub { font-size: 14px; color: var(--text-sub); margin-bottom: 30px; }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .tab-section { display: none; }
        .tab-section.active { display: block; animation: fadeFast 0.3s ease; }
        @keyframes fadeFast { from {opacity:0; transform:translateY(5px);} to {opacity:1; transform:translateY(0);} }

        /* Form Elements */
        label { display: block; margin-bottom: 8px; font-size: 13px; font-weight: 600; color: var(--text-sub); }
        
        select, input, textarea {
            width: 100%;
            padding: 12px;
            background: var(--bg-body);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            color: var(--text-main);
            outline: none;
            transition: border 0.2s;
            margin-bottom: 15px;
        }
        select:focus, input:focus, textarea:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1); }

        .badge-auto { background: #e0e7ff; color: #3730a3; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 700; display: inline-block; margin-bottom: 15px; }

        /* --- RIGHT: PREVIEW AREA --- */
        .preview-sidebar {
            background: var(--bg-card);
            border-left: 1px solid var(--border);
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .qr-frame {
            background: white; /* Always white for scanability */
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
            text-align: center;
            width: 100%;
            max-width: 280px;
        }

        #qrcode img { display: block; margin: 0 auto; }
        .qr-label { margin-top: 15px; font-size: 14px; font-weight: 700; color: #111; word-break: break-all; }

        .btn-download {
            margin-top: 30px;
            width: 100%;
            max-width: 280px;
            padding: 14px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: 0.2s;
        }
        .btn-download:hover { opacity: 0.9; transform: translateY(-1px); }

        .watermark { margin-top: auto; font-size: 12px; color: var(--text-sub); text-align: center; opacity: 0.7; }

        /* --- MOBILE RESPONSIVE --- */
        @media (max-width: 1024px) {
            body { flex-direction: column; overflow: auto; }
            .sidebar { width: 100%; flex-direction: row; align-items: center; padding: 15px; border-right: none; border-bottom: 1px solid var(--border); }
            .sidebar-footer { display: none; } /* Hide footer on mobile nav */
            .nav-label { display: none; }
            .logo { margin-bottom: 0; }
            .menu-item span { display: none; } /* Icon only */
            
            .main-wrapper { display: flex; flex-direction: column; height: auto; }
            .input-panel { padding: 20px; }
            .preview-sidebar { border-left: none; border-top: 1px solid var(--border); padding: 40px 20px; }
        }
    </style>
</head>
<body>

    <!-- 1. LEFT SIDEBAR -->
    <aside class="sidebar">
        <div class="logo">
            <i class="fa-solid fa-qrcode"></i>
            <span>QR Master</span>
        </div>

        <div class="nav-label">Main Tools</div>
        <div class="menu-item active" onclick="switchTab('inventory', this)">
            <i class="fa-solid fa-warehouse"></i> <span>Inventory</span>
        </div>
        <div class="menu-item" onclick="switchTab('url', this)">
            <i class="fa-solid fa-globe"></i> <span>Website URL</span>
        </div>
        <div class="menu-item" onclick="switchTab('text', this)">
            <i class="fa-solid fa-paragraph"></i> <span>Text / Code</span>
        </div>

        <div class="sidebar-footer">
            <div class="btn-theme" onclick="toggleTheme()">
                <i class="fa-solid fa-moon"></i> Dark / Light
            </div>
            <a href="https://wa.me/919641359307" target="_blank" class="btn-support">
                <i class="fa-brands fa-whatsapp"></i> Support
            </a>
            <div style="font-size:11px; text-align:center; color:var(--text-sub); margin-top:5px;">
                v2.5 Pro &bull; By Arka Mishra
            </div>
        </div>
    </aside>

    <!-- 2. MAIN CONTENT -->
    <main class="main-wrapper">
        
        <!-- CENTER: CONFIGURATION -->
        <div class="input-panel">
            
            <!-- INVENTORY SECTION -->
            <div id="tab-inventory" class="tab-section active">
                <div class="header-title">Inventory Management</div>
                <div class="header-sub">Generate tracking codes for shelves and items automatically.</div>

                <div class="card">
                    <div class="badge-auto">AUTO-GENERATOR</div>
                    <label>1. Select Shelf Category</label>
                    <select id="shelfSelect" onchange="loadInventoryItems()">
                        <option value="">-- Select Shelf --</option>
                    </select>

                    <label>2. Select Item ID</label>
                    <select id="itemSelect" onchange="applyInventoryCode()">
                        <option value="">-- Select Shelf First --</option>
                    </select>
                </div>

                <div class="card">
                    <label style="color:var(--primary);">‚úèÔ∏è Manual Override (Edit Code)</label>
                    <input type="text" id="manualCodeInput" placeholder="F0-XX-000..." oninput="manualUpdate()">
                    <small style="color:var(--text-sub);">Edits reflect immediately in the preview.</small>
                </div>
            </div>

            <!-- URL SECTION -->
            <div id="tab-url" class="tab-section">
                <div class="header-title">Website URL</div>
                <div class="header-sub">Create QR codes for web links.</div>
                <div class="card">
                    <label>Website Address (HTTPS)</label>
                    <input type="url" id="linkInput" placeholder="https://www.google.com" oninput="generateGeneric('linkInput')">
                </div>
            </div>

            <!-- TEXT SECTION -->
            <div id="tab-text" class="tab-section">
                <div class="header-title">Plain Text</div>
                <div class="header-sub">Simple text messages or ID codes.</div>
                <div class="card">
                    <label>Content</label>
                    <textarea id="textInput" rows="5" placeholder="Type content here..." oninput="generateGeneric('textInput')"></textarea>
                </div>
            </div>

            <!-- GLOBAL SETTINGS -->
            <div class="card">
                <div class="header-title" style="font-size:16px;">üé® Appearance</div>
                <div style="display:flex; gap:15px; margin-top:15px;">
                    <div style="flex:1;">
                        <label>QR Color</label>
                        <input type="color" id="qrColor" value="#000000" onchange="refreshQR()" style="height:45px; cursor:pointer; padding:2px;">
                    </div>
                    <div style="flex:2;">
                        <label>Label Text</label>
                        <input type="text" id="finalLabel" placeholder="Auto-fills from code..." oninput="updateLabel()">
                    </div>
                </div>
            </div>

        </div>

        <!-- RIGHT: PREVIEW SIDEBAR -->
        <div class="preview-sidebar">
            <div style="font-size:12px; font-weight:700; color:var(--text-sub); margin-bottom:20px; text-transform:uppercase;">Live Preview</div>
            
            <div id="capture-area" class="qr-frame">
                <div id="qrcode"></div>
                <div id="qr-text-label" class="qr-label"></div>
            </div>

            <button class="btn-download" onclick="saveImage()">
                <i class="fa-solid fa-download"></i> Save High Quality
            </button>

            <div class="watermark">
                Secure QR System<br>
                <strong>Designed by Arka Mishra</strong>
            </div>
        </div>

    </main>

    <script>
        // --- DATA CONFIGURATION ---
        const shelfConfig = [
            { id: "A01", count: 19 }, { id: "A02", count: 21 },
            { id: "A03", count: 25 }, { id: "A04", count: 7 },
            { id: "A05", count: 12 }, { id: "A06", count: 6 },
            { id: "A07", count: 3 },  { id: "A08", count: 8 },
            { id: "FV01", count: 9 }, { id: "CR01", count: 15 },
            { id: "FR01", count: 15 }
        ];

        let inventoryData = {};
        let currentQRText = "Welcome";

        // --- INIT ---
        window.onload = function() {
            const shelfSelect = document.getElementById('shelfSelect');
            
            shelfConfig.forEach(shelf => {
                let items = [];
                for(let i=1; i<=shelf.count; i++) {
                    let num = i.toString().padStart(3, '0');
                    items.push(`F0-${shelf.id}-${num}-01-A`);
                }
                
                let groupName = `Shelf ${shelf.id}`;
                inventoryData[groupName] = items;
                
                let opt = document.createElement('option');
                opt.value = groupName;
                opt.text = groupName;
                shelfSelect.appendChild(opt);
            });

            makeQR("Welcome");
        };

        // --- TABS ---
        function switchTab(type, btn) {
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
            if(btn) btn.classList.add('active');
            
            document.querySelectorAll('.tab-section').forEach(el => el.classList.remove('active'));
            document.getElementById('tab-' + type).classList.add('active');
        }

        // --- LOGIC ---
        function loadInventoryItems() {
            const group = document.getElementById('shelfSelect').value;
            const itemSelect = document.getElementById('itemSelect');
            itemSelect.innerHTML = '<option value="">-- Select Item --</option>';
            
            if(group && inventoryData[group]) {
                inventoryData[group].forEach(code => {
                    let opt = document.createElement('option');
                    opt.value = code;
                    opt.text = code;
                    itemSelect.appendChild(opt);
                });
            }
        }

        function applyInventoryCode() {
            const code = document.getElementById('itemSelect').value;
            if(code) {
                document.getElementById('manualCodeInput').value = code;
                document.getElementById('finalLabel').value = code;
                updateLabel();
                makeQR(code);
            }
        }

        function manualUpdate() {
            const text = document.getElementById('manualCodeInput').value;
            document.getElementById('finalLabel').value = text;
            updateLabel();
            makeQR(text);
        }

        function generateGeneric(id) {
            makeQR(document.getElementById(id).value);
        }

        function updateLabel() {
            document.getElementById('qr-text-label').innerText = document.getElementById('finalLabel').value;
        }

        function makeQR(text) {
            if(!text) return;
            currentQRText = text;
            const color = document.getElementById('qrColor').value;
            const container = document.getElementById('qrcode');
            container.innerHTML = "";

            new QRCode(container, {
                text: text,
                width: 200,
                height: 200,
                colorDark : color,
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H
            });
        }

        function refreshQR() { makeQR(currentQRText); }

        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
        }

        // --- HIGH QUALITY SAVE ---
        function saveImage() {
            const captureArea = document.getElementById('capture-area');
            
            // Scale up for high quality
            html2canvas(captureArea, {
                scale: 3, // 3x resolution
                backgroundColor: "#ffffff"
            }).then(canvas => {
                let link = document.createElement('a');
                link.download = 'QR_Master_HD.jpg';
                link.href = canvas.toDataURL('image/jpeg', 1.0);
                link.click();
            });
        }
    </script>
</body>
</html>